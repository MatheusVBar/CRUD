<!DOCTYPE html>
<html>
    <head>
        <title>Cadasto de contatos</title>
        <link rel="stylesheet href="https://www.w3schools.com/w3css/4/w3.css">
    </head>
    <body class="w3-container">
        <h2 class="w3-cener">Cadastro de contatos</h2>
    </body>    

    <form class="w3-container w3-card-4" id="formContato">
        <p><input class = "w3-input" type="text" name = "nome" placeholder="Nome" required></p>
        <p><input class = "w3-input" type="email" name = "email" placeholder="Email" required></p>
        <p><textarea class = "w3-input" name="anotacao" placeholder="Anotação"></textarea></p>
        <p><button class = "w3-button w3-blue" type="submit">Salvar</button></p>
    </form>
    <script>
        document.getElementById('formContato').addEventListener('submit', async function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const data = Object.fromEntries(formData.entries());

            const response = await fetch('http://localhost:3000/api/contatos', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body:JSON.stringify(data)
            });

            const result = await response.json();
            alert('Contato salvo com ID:' + result.id);
        });
    </script>
    </body>
</html>